{"version":3,"sources":["SpaceShip Controller.js"],"names":["Emitter","require","cc","Class","extends","Component","properties","_mousePos","v2","playerHealth","_currentSkin","spriteFrameGreen","default","type","SpriteFrame","_flag","spriteFrameBlue","spriteFrameRed","spriteFrameOrange","onLoad","Canvas","instance","node","on","getMousePosition","shoot","systemEvent","SystemEvent","EventType","KEY_DOWN","onKeyDown","KEY_UP","onKeyUp","getComponent","Sprite","event","getLocation","_button","emit","keyCode","macro","KEY","z","changeSkin","x","c","v","update","dt","myCanvasSize","getContentSize","position","width","y","height","spriteFrame","onCollisionEnter","other","self","group","dead","destroy","getDamge","tween","to","opacity","start"],"mappings":"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","file":"SpaceShip Controller.js","sourceRoot":"..\\..\\..\\..\\assets\\Scripts","sourcesContent":["const Emitter = require(\"EventsListener\")\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        _mousePos: cc.v2,\r\n        playerHealth: 100,\r\n        _currentSkin: null,\r\n        spriteFrameGreen: {\r\n            default: null,\r\n            type: cc.SpriteFrame,\r\n            _flag: false\r\n        },\r\n\r\n        spriteFrameBlue: {\r\n            default: null,\r\n            type: cc.SpriteFrame,\r\n            _flag: false,\r\n        },\r\n\r\n        spriteFrameRed: {\r\n            default: null,\r\n            type: cc.SpriteFrame,\r\n            _flag: false,\r\n        },\r\n\r\n        spriteFrameOrange: {\r\n            default: null,\r\n            type: cc.SpriteFrame,\r\n            _flag: false \r\n        },\r\n    },\r\n\r\n\r\n    onLoad () {\r\n        cc.Canvas.instance.node.on(\"mousemove\", this.getMousePosition, this)\r\n        this.node.on(\"mousedown\", this.shoot, this)\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\r\n        this._currentSkin = this.node.getComponent(cc.Sprite)\r\n       \r\n    },\r\n\r\n    getMousePosition(event){\r\n        this._mousePos = event.getLocation()\r\n    },\r\n\r\n    shoot(event){\r\n        if (event._button === 0){\r\n            Emitter.instance.emit(\"letShoot\")\r\n        }\r\n    },\r\n\r\n    onKeyDown(event){\r\n        this.spriteFrameGreen._flag = false\r\n        this.spriteFrameBlue._flag = false\r\n        this.spriteFrameRed._flag = false\r\n        this.spriteFrameOrange._flag = false\r\n        switch(event.keyCode){\r\n            case cc.macro.KEY.z:\r\n                this.spriteFrameGreen._flag = true\r\n                this.changeSkin()\r\n                break;\r\n            case cc.macro.KEY.x:\r\n                this.spriteFrameBlue._flag = true\r\n                this.changeSkin()\r\n                break;\r\n            case cc.macro.KEY.c:\r\n                this.spriteFrameRed._flag = true\r\n                this.changeSkin()\r\n                break;\r\n            case cc.macro.KEY.v:\r\n                this.spriteFrameOrange._flag = true\r\n                this.changeSkin()\r\n                break;\r\n        }\r\n    },    \r\n\r\n    update (dt) {\r\n        let myCanvasSize = cc.Canvas.instance.node.getContentSize()\r\n        if (this._mousePos != null){\r\n            this.node.position = cc.v2(this._mousePos.x - (myCanvasSize.width/2), this._mousePos.y - (myCanvasSize.height/2)) \r\n        }   \r\n    },\r\n\r\n    changeSkin(){\r\n        if (this.spriteFrameGreen._flag){\r\n            this._currentSkin.spriteFrame = this.spriteFrameGreen\r\n            Emitter.instance.emit(\"skin\", this.spriteFrameGreen._flag, this.spriteFrameBlue._flag, this.spriteFrameRed._flag, this.spriteFrameOrange._flag)\r\n        }\r\n        else if(this.spriteFrameBlue._flag){\r\n            this._currentSkin.spriteFrame = this.spriteFrameBlue\r\n            Emitter.instance.emit(\"skin\", this.spriteFrameGreen._flag, this.spriteFrameBlue._flag, this.spriteFrameRed._flag, this.spriteFrameOrange._flag)\r\n        }\r\n        else if(this.spriteFrameRed._flag){\r\n            this._currentSkin.spriteFrame = this.spriteFrameRed\r\n            Emitter.instance.emit(\"skin\", this.spriteFrameGreen._flag, this.spriteFrameBlue._flag, this.spriteFrameRed._flag, this.spriteFrameOrange._flag)\r\n        }\r\n        else if (this.spriteFrameOrange._flag){\r\n            this._currentSkin.spriteFrame = this.spriteFrameOrange\r\n            Emitter.instance.emit(\"skin\", this.spriteFrameGreen._flag, this.spriteFrameBlue._flag, this.spriteFrameRed._flag, this.spriteFrameOrange._flag)\r\n        }\r\n    },\r\n\r\n    onCollisionEnter(other, self){\r\n        if (other.node.group == \"Enemies\"){\r\n            this.dead()\r\n        }\r\n        else if (other.node.group == \"Enemies Bullet\"){\r\n            other.node.destroy()\r\n            this.playerHealth -= 10\r\n                if (this.playerHealth<=0){\r\n                    Emitter.instance.emit(\"healthbar\",this.playerHealth)\r\n                    this.dead()\r\n                    \r\n                }\r\n                else{\r\n                    this.getDamge()\r\n                }\r\n        }\r\n    },\r\n\r\n    getDamge(){\r\n        Emitter.instance.emit(\"healthbar\",this.playerHealth)\r\n        cc.tween(this.node)\r\n            .to(0.1,{opacity: 155})\r\n            .to(0.1,{opacity: 255})\r\n            .to(0.1,{opacity: 155})\r\n            .to(0.1,{opacity: 255})\r\n            .to(0.1,{opacity: 155})\r\n            .to(0.1,{opacity: 255})\r\n            .start()\r\n    },\r\n\r\n    dead(){\r\n        this.node.destroy()\r\n    },\r\n});\r\n"]}