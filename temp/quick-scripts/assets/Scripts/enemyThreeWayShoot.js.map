{"version":3,"sources":["enemyThreeWayShoot.js"],"names":["Emitter","require","cc","Class","extends","Component","properties","moveToX","moveToY","prefabBullet","Prefab","_timerShoot","maxHealth","start","moving","randomAction","Math","random","tween","node","to","x","y","call","standingAction1","standingAction2","shoot","bulletPos","convertToWorldSpaceAR","position","convertToNodeSpaceAR","redBullet1","instantiate","parent","Canvas","instance","setPosition","getComponent","bulletNumber","redBullet2","redBullet3","repeatForever","by","update","dt","dead","emit","destroy"],"mappings":"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","file":"enemyThreeWayShoot.js","sourceRoot":"../../../../assets/Scripts","sourcesContent":["const Emitter = require(\"EventsListener\")\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        moveToX: 0, // vị trí x bay đến\n        moveToY: 0, // vị trí y bay đến\n        prefabBullet : cc.Prefab,\n        _timerShoot: 0,\n        maxHealth :100,\n    },\n\n    start () {\n        this.moving();\n    },\n\n    moving(){\n        let randomAction = Math.random()\n        cc.tween(this.node)\n            .to(1.5, {x: this.moveToX, y: this.moveToY})\n            .call(() =>{\n                if (randomAction >0.5){\n                    this.standingAction1()\n                }\n                else{\n                    this.standingAction2()\n                }\n            })\n            .start();\n    },\n\n    shoot(){\n        let bulletPos = this.node.convertToWorldSpaceAR(this.node.position);\n        bulletPos = this.node.convertToNodeSpaceAR(bulletPos);\n        \n        let redBullet1 = cc.instantiate(this.prefabBullet);\n        redBullet1.parent = cc.Canvas.instance.node;\n        redBullet1.setPosition(bulletPos.x, bulletPos.y);\n        redBullet1.getComponent('bulletThreeWay').bulletNumber = 1;\n\n\n\n        let redBullet2 = cc.instantiate(this.prefabBullet)\n        redBullet2.parent = cc.Canvas.instance.node\n        redBullet2.setPosition(bulletPos.x, bulletPos.y);\n        redBullet2.getComponent('bulletThreeWay').bulletNumber = 2;\n\n\n        let redBullet3 = cc.instantiate(this.prefabBullet)\n        redBullet3.parent = cc.Canvas.instance.node\n        redBullet3.setPosition(bulletPos.x, bulletPos.y);\n        redBullet3.getComponent('bulletThreeWay').bulletNumber = 3;\n\n    },\n\n\n    standingAction1(){\n        cc.tween(this.node)\n            .repeatForever(\n                cc.tween(this.node)\n                    .by(1,{x:10})\n                    .by(2,{x:-20})\n                    .by(1,{x:10})\n            )\n            .start()\n    },\n\n    standingAction2(){\n        cc.tween(this.node)\n            .repeatForever(\n                cc.tween(this.node)\n                    .by(1,{x:-10})\n                    .by(2,{x:20})\n                    .by(1,{x:-10})\n            )\n            .start()\n    },\n\n    update (dt) {\n        this._timerShoot+= dt;\n        if(this._timerShoot >= 2){\n            this.shoot();\n            this._timerShoot= 0;\n        }\n        if (this.maxHealth <= 0){\n            this.dead()\n        }\n    },\n\n    dead(){\n        Emitter.instance.emit(\"countEnemies\")\n        this.node.destroy()\n    }\n});\n"]}