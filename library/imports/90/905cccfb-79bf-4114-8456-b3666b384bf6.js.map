{"version":3,"sources":["..\\..\\..\\..\\assets\\Scripts/assets\\Scripts\\SpaceShip Controller.js"],"names":["Emitter","require","cc","Class","extends","Component","properties","_mousePos","v2","_currentSkin","spriteFrameGreen","default","type","SpriteFrame","_flag","spriteFrameBlue","spriteFrameRed","spriteFrameOrange","onLoad","Canvas","instance","node","on","getMousePosition","shoot","systemEvent","SystemEvent","EventType","KEY_DOWN","onKeyDown","KEY_UP","onKeyUp","getComponent","Sprite","event","getLocation","_button","emit","keyCode","macro","KEY","z","changeSkin","x","c","v","update","dt","myCanvasSize","getContentSize","position","width","y","height","spriteFrame","dead"],"mappings":"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","file":"SpaceShip Controller.js","sourceRoot":"..\\..\\..\\..\\assets\\Scripts","sourcesContent":["const Emitter = require(\"EventsListener\")\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        _mousePos: cc.v2,\r\n        _currentSkin: null,\r\n        spriteFrameGreen: {\r\n            default: null,\r\n            type: cc.SpriteFrame,\r\n            _flag: false\r\n        },\r\n\r\n        spriteFrameBlue: {\r\n            default: null,\r\n            type: cc.SpriteFrame,\r\n            _flag: false,\r\n        },\r\n\r\n        spriteFrameRed: {\r\n            default: null,\r\n            type: cc.SpriteFrame,\r\n            _flag: false,\r\n        },\r\n\r\n        spriteFrameOrange: {\r\n            default: null,\r\n            type: cc.SpriteFrame,\r\n            _flag: false \r\n        },\r\n    },\r\n\r\n\r\n    onLoad () {\r\n        cc.Canvas.instance.node.on(\"mousemove\", this.getMousePosition, this)\r\n        this.node.on(\"mousedown\", this.shoot, this)\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\r\n        this._currentSkin = this.node.getComponent(cc.Sprite)\r\n       \r\n    },\r\n\r\n    getMousePosition(event){\r\n        this._mousePos = event.getLocation()\r\n    },\r\n\r\n    shoot(event){\r\n        if (event._button === 0){\r\n            Emitter.instance.emit(\"letShoot\")\r\n        }\r\n    },\r\n\r\n    onKeyDown(event){\r\n        this.spriteFrameGreen._flag = false\r\n        this.spriteFrameBlue._flag = false\r\n        this.spriteFrameRed._flag = false\r\n        this.spriteFrameOrange._flag = false\r\n        switch(event.keyCode){\r\n            case cc.macro.KEY.z:\r\n                this.spriteFrameGreen._flag = true\r\n                this.changeSkin()\r\n                break;\r\n            case cc.macro.KEY.x:\r\n                this.spriteFrameBlue._flag = true\r\n                this.changeSkin()\r\n                break;\r\n            case cc.macro.KEY.c:\r\n                this.spriteFrameRed._flag = true\r\n                this.changeSkin()\r\n                break;\r\n            case cc.macro.KEY.v:\r\n                this.spriteFrameOrange._flag = true\r\n                this.changeSkin()\r\n                break;\r\n        }\r\n    },    \r\n\r\n    update (dt) {\r\n        let myCanvasSize = cc.Canvas.instance.node.getContentSize()\r\n        if (this._mousePos != null){\r\n            this.node.position = cc.v2(this._mousePos.x - (myCanvasSize.width/2), this._mousePos.y - (myCanvasSize.height/2)) \r\n        }   \r\n    },\r\n\r\n    changeSkin(){\r\n        if (this.spriteFrameGreen._flag){\r\n            this._currentSkin.spriteFrame = this.spriteFrameGreen\r\n            Emitter.instance.emit(\"skin\", this.spriteFrameGreen._flag, this.spriteFrameBlue._flag, this.spriteFrameRed._flag, this.spriteFrameOrange._flag)\r\n        }\r\n        else if(this.spriteFrameBlue._flag){\r\n            this._currentSkin.spriteFrame = this.spriteFrameBlue\r\n            Emitter.instance.emit(\"skin\", this.spriteFrameGreen._flag, this.spriteFrameBlue._flag, this.spriteFrameRed._flag, this.spriteFrameOrange._flag)\r\n        }\r\n        else if(this.spriteFrameRed._flag){\r\n            this._currentSkin.spriteFrame = this.spriteFrameRed\r\n            Emitter.instance.emit(\"skin\", this.spriteFrameGreen._flag, this.spriteFrameBlue._flag, this.spriteFrameRed._flag, this.spriteFrameOrange._flag)\r\n        }\r\n        else if (this.spriteFrameOrange._flag){\r\n            this._currentSkin.spriteFrame = this.spriteFrameOrange\r\n            Emitter.instance.emit(\"skin\", this.spriteFrameGreen._flag, this.spriteFrameBlue._flag, this.spriteFrameRed._flag, this.spriteFrameOrange._flag)\r\n        }\r\n    },\r\n\r\n    dead(){\r\n        // play animation player dead\r\n    },\r\n});\r\n"]}