{"version":3,"sources":["../../../../assets/Scripts/assets/Scripts/SpaceShip Controller.js"],"names":["Emitter","require","cc","Class","extends","Component","properties","_mousePos","v2","playerHealth","_currentSkin","spriteFrameGreen","default","type","SpriteFrame","_flag","spriteFrameBlue","spriteFrameRed","spriteFrameOrange","onLoad","Canvas","instance","node","on","getMousePosition","shoot","systemEvent","SystemEvent","EventType","KEY_DOWN","onKeyDown","KEY_UP","onKeyUp","getComponent","Sprite","event","getLocation","_button","emit","keyCode","macro","KEY","z","changeSkin","x","c","v","update","dt","myCanvasSize","getContentSize","position","width","y","height","spriteFrame","onCollisionEnter","other","self","group","dead","destroy","getDamge"],"mappings":"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","file":"SpaceShip Controller.js","sourceRoot":"../../../../assets/Scripts","sourcesContent":["const Emitter = require(\"EventsListener\")\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        _mousePos: cc.v2,\n        playerHealth: 100,\n        _currentSkin: null,\n        spriteFrameGreen: {\n            default: null,\n            type: cc.SpriteFrame,\n            _flag: false\n        },\n\n        spriteFrameBlue: {\n            default: null,\n            type: cc.SpriteFrame,\n            _flag: false,\n        },\n\n        spriteFrameRed: {\n            default: null,\n            type: cc.SpriteFrame,\n            _flag: false,\n        },\n\n        spriteFrameOrange: {\n            default: null,\n            type: cc.SpriteFrame,\n            _flag: false \n        },\n    },\n\n\n    onLoad () {\n        cc.Canvas.instance.node.on(\"mousemove\", this.getMousePosition, this)\n        this.node.on(\"mousedown\", this.shoot, this)\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\n        this._currentSkin = this.node.getComponent(cc.Sprite)\n       \n    },\n\n    getMousePosition(event){\n        this._mousePos = event.getLocation()\n    },\n\n    shoot(event){\n        if (event._button === 0){\n            Emitter.instance.emit(\"letShoot\")\n        }\n    },\n\n    onKeyDown(event){\n        this.spriteFrameGreen._flag = false\n        this.spriteFrameBlue._flag = false\n        this.spriteFrameRed._flag = false\n        this.spriteFrameOrange._flag = false\n        switch(event.keyCode){\n            case cc.macro.KEY.z:\n                this.spriteFrameGreen._flag = true\n                this.changeSkin()\n                break;\n            case cc.macro.KEY.x:\n                this.spriteFrameBlue._flag = true\n                this.changeSkin()\n                break;\n            case cc.macro.KEY.c:\n                this.spriteFrameRed._flag = true\n                this.changeSkin()\n                break;\n            case cc.macro.KEY.v:\n                this.spriteFrameOrange._flag = true\n                this.changeSkin()\n                break;\n        }\n    },    \n\n    update (dt) {\n        let myCanvasSize = cc.Canvas.instance.node.getContentSize()\n        if (this._mousePos != null){\n            this.node.position = cc.v2(this._mousePos.x - (myCanvasSize.width/2), this._mousePos.y - (myCanvasSize.height/2)) \n        }   \n    },\n\n    changeSkin(){\n        if (this.spriteFrameGreen._flag){\n            this._currentSkin.spriteFrame = this.spriteFrameGreen\n            Emitter.instance.emit(\"skin\", this.spriteFrameGreen._flag, this.spriteFrameBlue._flag, this.spriteFrameRed._flag, this.spriteFrameOrange._flag)\n        }\n        else if(this.spriteFrameBlue._flag){\n            this._currentSkin.spriteFrame = this.spriteFrameBlue\n            Emitter.instance.emit(\"skin\", this.spriteFrameGreen._flag, this.spriteFrameBlue._flag, this.spriteFrameRed._flag, this.spriteFrameOrange._flag)\n        }\n        else if(this.spriteFrameRed._flag){\n            this._currentSkin.spriteFrame = this.spriteFrameRed\n            Emitter.instance.emit(\"skin\", this.spriteFrameGreen._flag, this.spriteFrameBlue._flag, this.spriteFrameRed._flag, this.spriteFrameOrange._flag)\n        }\n        else if (this.spriteFrameOrange._flag){\n            this._currentSkin.spriteFrame = this.spriteFrameOrange\n            Emitter.instance.emit(\"skin\", this.spriteFrameGreen._flag, this.spriteFrameBlue._flag, this.spriteFrameRed._flag, this.spriteFrameOrange._flag)\n        }\n    },\n\n    onCollisionEnter(other, self){\n        if (other.node.group == \"Enemies\"){\n            this.dead()\n        }\n        else if (other.node.group == \"Enemies Bullet\"){\n            other.node.destroy()\n            this.playerHealth -= 10\n                if (this.playerHealth<=0){\n                    Emitter.instance.emit(\"healthbar\",this.playerHealth)\n                    this.dead()\n                    \n                }\n                else{\n                    this.getDamge()\n                }\n        }\n    },\n\n    getDamge(){\n        Emitter.instance.emit(\"healthbar\",this.playerHealth)\n    },\n\n    dead(){\n        this.node.destroy()\n    },\n});\n"]}