{"version":3,"sources":["..\\..\\..\\..\\assets\\Scripts/assets\\Scripts\\enemyThreeWayShoot.js"],"names":["Emitter","require","cc","Class","extends","Component","properties","moveToX","moveToY","prefabBullet","Prefab","_timerShoot","maxHealth","healthBar","ProgressBar","start","moving","randomAction","Math","random","tween","node","to","x","y","call","standingAction1","standingAction2","shoot","bulletPos","convertToWorldSpaceAR","position","convertToNodeSpaceAR","redBullet1","instantiate","parent","Canvas","instance","setPosition","getComponent","bulletNumber","redBullet2","redBullet3","repeatForever","by","update","dt","dead","getDamage","progress","emit","destroy"],"mappings":"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","file":"enemyThreeWayShoot.js","sourceRoot":"..\\..\\..\\..\\assets\\Scripts","sourcesContent":["const Emitter = require(\"EventsListener\")\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        moveToX: 0, // vị trí x bay đến\r\n        moveToY: 0, // vị trí y bay đến\r\n        prefabBullet : cc.Prefab,\r\n        _timerShoot: 0,\r\n        maxHealth :100,\r\n        healthBar: cc.ProgressBar\r\n    },\r\n\r\n    start () {\r\n        this.moving();\r\n    },\r\n\r\n    moving(){\r\n        let randomAction = Math.random()\r\n        cc.tween(this.node)\r\n            .to(1.5, {x: this.moveToX, y: this.moveToY})\r\n            .call(() =>{\r\n                if (randomAction >0.5){\r\n                    this.standingAction1()\r\n                }\r\n                else{\r\n                    this.standingAction2()\r\n                }\r\n            })\r\n            .start();\r\n    },\r\n\r\n    shoot(){\r\n        let bulletPos = this.node.convertToWorldSpaceAR(this.node.position);\r\n        bulletPos = this.node.convertToNodeSpaceAR(bulletPos);\r\n        \r\n        let redBullet1 = cc.instantiate(this.prefabBullet);\r\n        redBullet1.parent = cc.Canvas.instance.node;\r\n        redBullet1.setPosition(bulletPos.x, bulletPos.y);\r\n        redBullet1.getComponent('bulletThreeWay').bulletNumber = 1;\r\n\r\n\r\n\r\n        let redBullet2 = cc.instantiate(this.prefabBullet)\r\n        redBullet2.parent = cc.Canvas.instance.node\r\n        redBullet2.setPosition(bulletPos.x, bulletPos.y);\r\n        redBullet2.getComponent('bulletThreeWay').bulletNumber = 2;\r\n\r\n\r\n        let redBullet3 = cc.instantiate(this.prefabBullet)\r\n        redBullet3.parent = cc.Canvas.instance.node\r\n        redBullet3.setPosition(bulletPos.x, bulletPos.y);\r\n        redBullet3.getComponent('bulletThreeWay').bulletNumber = 3;\r\n\r\n    },\r\n\r\n\r\n    standingAction1(){\r\n        cc.tween(this.node)\r\n            .repeatForever(\r\n                cc.tween(this.node)\r\n                    .by(1,{x:10})\r\n                    .by(2,{x:-20})\r\n                    .by(1,{x:10})\r\n            )\r\n            .start()\r\n    },\r\n\r\n    standingAction2(){\r\n        cc.tween(this.node)\r\n            .repeatForever(\r\n                cc.tween(this.node)\r\n                    .by(1,{x:-10})\r\n                    .by(2,{x:20})\r\n                    .by(1,{x:-10})\r\n            )\r\n            .start()\r\n    },\r\n\r\n    update (dt) {\r\n        this._timerShoot+= dt;\r\n        if(this._timerShoot >= 2){\r\n            this.shoot();\r\n            this._timerShoot= 0;\r\n        }\r\n        if (this.maxHealth <= 0){\r\n            this.dead()\r\n        }\r\n    },\r\n\r\n    getDamage(){\r\n        this.healthBar.getComponent(cc.ProgressBar).progress= this.maxHealth/100\r\n    },\r\n\r\n    dead(){\r\n        Emitter.instance.emit(\"countEnemies\")\r\n         this.node.destroy()\r\n    }\r\n});\r\n"]}